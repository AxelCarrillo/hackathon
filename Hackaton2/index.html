<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Inicio</title>
    <link rel="stylesheet" href="styles/styleindex.css">
</head>
<body>
    <nav>
        <a href="index.html">INICIO</a>
        <a href="#">
            <img src="img/LogoZontle.png" alt="Logo">
        </a>
        <a href="formulario.html">QUIZ</a>
    </nav>

    <div class="container">
        <div class="cards-container">
             <!-- Card 1 -->
             <div class="card">
                <img src="img/InstanciaMujeres.png" alt="Image 1">
                <h3>Instancia Municipal de las Mujeres en Tulancingo</h3>
                <p>Ubicación: Colonia La Guadalupe Calle Tolteca S/Tulancingo</p>
                <p class="phone">Número: +52 123 456 7890</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 2 -->
            <div class="card">
                <img src="img/SistemaDIF.png" alt="Image 2">
                <h3>Sistema DIF Hidalgo Procuraduria de la Defensa del menor y la Familia</h3>
                <p>Ubicación: Guadalajara</p>
                <p class="phone">Número: +52 987 654 3210</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 3 -->
            <div class="card">
                <img src="img/JuzagdoCivilFamiliar.png" alt="Image 3">
                <h3>Juzgado Civil y Familiar de Tulancingo, Hidalgo</h3>
                <p>Ubicación: Monterrey</p>
                <p class="phone">Número: +52 555 123 4567</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 4 -->
            <div class="card">
                <img src="img/MunicipioDemocracia.png" alt="Image 4">
                <h3>Municipio y Democracia</h3>
                <p>Ubicación: Cancún</p>
                <p class="phone">Número: +52 444 222 3333</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 5 -->
            <div class="card">
                <img src="img/PoderJudicialHidalgo.png" alt="Image 5">
                <h3>Poder Judicial del Estado de Hidalgo</h3>
                <p>Ubicación: Puebla</p>
                <p class="phone">Número: +52 777 888 9999</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 6 -->
            <div class="card">
                <img src="img/JuzgadoMixto.png" alt="Image 6">
                <h3>Juzgado Mixto de Primera Instancia</h3>
                <p>Ubicación: Mérida</p>
                <p class="phone">Número: +52 666 555 4444</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 7 -->
            <div class="card">
                <img src="img/CoordinacionRegional.png" alt="Image 7">
                <h3>Cordinacion de Planeacion y Desarrollo Regional 2 Tulancingo</h3>
                <p>Ubicación: Mérida</p>
                <p class="phone">Número: +52 666 555 4444</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 8 -->
            <div class="card">
                <img src="img/picturex.png" alt="Image 8">
                <h3>DIF de Tulancingo, Hidalgo</h3>
                <p>Ubicación: Mérida</p>
                <p class="phone">Número: +52 666 555 4444</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
            <!-- Card 9 -->
            <div class="card">
                <img src="img/CEAVIF.png" alt="Image 7">
                <h3>CEAVIF Tulancingo de Bravo</h3>
                <p>Ubicación: Mérida</p>
                <p class="phone">Número: +52 666 555 4444</p>
                <p>Horario: 9 am - 5 pm</p>
            </div>
        </div>
    </div>

    <hr class="hrline">
    <h1 class="h1video">Videos</h1>
    <div class="card-container">
        <div class="cardytt">  
        <a href="https://www.youtube.com/" class="card-button" target="_blank">YouTube</a>
        </div>
        <div class="cardytt">
        <a href="https://www.youtube.com/" class="card-button" target="_blank">YouTube</a>
        </div>
        <div class="cardytt">
        <a href="https://www.youtube.com/" class="card-button" target="_blank">YouTube</a>
        </div>
    </div>    

    <!-- Botón flotante para abrir el chatbot -->
    <button class="chatbot-btn" onclick="toggleChatbox()">🤖</button>

    <!-- Chatbox -->
    <div class="chatbox" id="chatbox">
        <div class="chatbox-header">
            <h4>Chatbot</h4>
        </div>
        <div class="chatbox-body" id="chatbox-body">
            <!-- Aquí se mostrarían los mensajes del chatbot -->
        </div>
        <div class="chatbox-footer">
            <input type="text" id="chat-input" placeholder="Escribe tu mensaje...">
            <button onclick="sendMessage()">Enviar</button>
        </div>
    </div>

    <script>
        // Función para abrir y cerrar el chatbox con animación
        function toggleChatbox() {
            var chatbox = document.getElementById("chatbox");
            if (chatbox.classList.contains("show")) {
                chatbox.classList.remove("show"); // Cierra el chat con animación
            } else {
                chatbox.classList.add("show"); // Abre el chat con animación
            }
        }

        // Función para enviar mensaje en el chat
        function sendMessage() {
    var inputField = document.getElementById("chat-input");
    var chatboxBody = document.getElementById("chatbox-body");
    var message = inputField.value.trim();

    if (message !== "") {
        // Crear el mensaje del usuario
        var userMessageElement = document.createElement("p");
        userMessageElement.textContent = "Tú: " + message;
        userMessageElement.classList.add("user-message");  
        chatboxBody.appendChild(userMessageElement);

        inputField.value = "";  // Limpiar el campo de entrada

        // Simular una respuesta del chatbot mientras esperamos la consulta
        var chatbotResponseElement = document.createElement("p");
        chatbotResponseElement.textContent = "🤖 Estoy procesando tu mensaje...";  
        chatbotResponseElement.classList.add("chatbot-message");  
        chatboxBody.appendChild(chatbotResponseElement);

        // Desplazar hacia abajo para mostrar el nuevo mensaje
        chatboxBody.scrollTop = chatboxBody.scrollHeight;

        // Realizar la consulta dinámica a la API usando el mensaje del usuario
        var apiUrl = "https://api-rest-groq.onrender.com/ia/" + encodeURIComponent(message);
        console.log('URL de la API:', apiUrl); // Verificar la URL generada

        fetch(apiUrl)
            .then(response => {
                console.log('Respuesta completa de la API:', response); // Verifica la respuesta de la API

                if (!response.ok) {
                    throw new Error("Error en la respuesta de la API: " + response.status);
                }

                return response.json();  // Intentar convertir a JSON
            })
            .then(data => {
                console.log('Datos recibidos de la API:', data); // Verifica los datos recibidos

                if (data && data.message) {
                    var responseMessage = data.message;
                    chatbotResponseElement.textContent = "🤖 " + responseMessage;
                } else {
                    chatbotResponseElement.textContent = "🤖 No recibí una respuesta válida.";
                }

                chatboxBody.appendChild(chatbotResponseElement);
                chatboxBody.scrollTop = chatboxBody.scrollHeight;
            })
            .catch(error => {
                console.error('Error al obtener la información:', error); // Ver error en consola
                chatbotResponseElement.textContent = "🤖 Ocurrió un error al obtener la información.";
                chatboxBody.appendChild(chatbotResponseElement);
                chatboxBody.scrollTop = chatboxBody.scrollHeight;
            });
    }
}

    </script>
</body>
</html>
